/**
 * Created by IDE.
 * User: gzhang
 * Date: 11/5/11
 * Time: 7:22 PM
 * To change this template use File | Settings | File Templates.
 */

//todo

function padL(test, len, def) {
    while (test.length < len) {
        test = def + test;
    }
    return test;
}


module.exports = {
    formatDate: function (date, format) {
//        var date = this;
        if (!format)
            format = "MM/dd/yyyy";

        var month = date.getMonth() + 1;
        var year = date.getFullYear();

        format = format.replace("MM", padL(month.toString(), 2, "0"));

        if (format.indexOf("yyyy") > -1)
            format = format.replace("yyyy", year.toString());
        else if (format.indexOf("yy") > -1)
            format = format.replace("yy", year.toString().substr(2, 2));

        format = format.replace("dd", padL(date.getDate().toString(),2, "0"));

        var hours = date.getHours();
        if (format.indexOf("t") > -1) {
            if (hours > 11)
                format = format.replace("t", "pm");
            else
                format = format.replace("t", "am");
        }
        if (format.indexOf("HH") > -1)
            format = format.replace("HH", padL(hours.toString(),2, "0"));
        if (format.indexOf("hh") > -1) {
            if (hours > 12) hours - 12;
            if (hours === 0) hours = 12;
            format = format.replace("hh", padL(hours.toString(), 2, "0"));
        }
        if (format.indexOf("mm") > -1)
            format = format.replace("mm", padL(date.getMinutes().toString(), 2, "0"));
        if (format.indexOf("ss") > -1)
            format = format.replace("ss", padL(date.getSeconds().toString(), 2, "0"));
        return format;
    }
};